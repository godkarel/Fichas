<?xml version="1.0" encoding="UTF-8"?>
<script>
	<![CDATA[ 
		function self.ControlaClasseEspecialMPAte20()			
			if sheet.Classe == 'Cavaleiro Draconico' then
				sheet.RHPNivelAte20 = sheet.Level;
				
				if sheet.RHPNivelAte20 > 20 then
					sheet.RHPNivelAte20 = 20;
				end;
						
				sheet.CMPNivel = (tonumber(sheet.RHPNivelAte20) or 0) * 4 + 125;
				
				if sheet.Level < 21 then
					sheet.EMPNivel = 0;
				end;	
			 
				sheet.RHPNivelAte30 = math.floor((sheet.Level) - 20);
				
				if sheet.RHPNivelAte30 > 10 then
					sheet.RHPNivelAte30 = 10;
				end;

				if sheet.RHPNivelAte30 < 0 then
					sheet.RHPNivelAte30 = 0;
				end;	
					
				sheet.EMPNivel = (tonumber(sheet.RHPNivelAte30) or 0) * 3;
				
			end;	

			if sheet.Classe == 'Mago do Caos' then
				sheet.RHPNivelAte20 = sheet.Level;
				
				if sheet.RHPNivelAte20 > 20 then
					sheet.RHPNivelAte20 = 20;
				end;
						
				sheet.CMPNivel = (tonumber(sheet.RHPNivelAte20) or 0) * 4 + 125;
				
				if sheet.Level < 21 then
					sheet.EMPNivel = 0;
				end;	
			 
				sheet.RHPNivelAte30 = math.floor((sheet.Level) - 20);
				
				if sheet.RHPNivelAte30 > 10 then
					sheet.RHPNivelAte30 = 10;
				end;

				if sheet.RHPNivelAte30 < 0 then
					sheet.RHPNivelAte30 = 0;
				end;	
					
				sheet.EMPNivel = (tonumber(sheet.RHPNivelAte30) or 0) * 5;
				
			end;			
		end;
	]]>		
    </script> 